{% extends 'panel.html' %}
{% block title %}Projects{% endblock %}
{% block content %}
{% load static %}
{% if user.is_authenticated %}

<div class='row mt-4 mb-4'>
	<div class='col-8'>
		<div class='sections'>
			<h1 class='h1-1'>Up Comming Events

			</h1>
			<hr>
			<div class="overflow-auto scroll-menu">
				{% for event in project_events %}
				<div class='row p-p' style='width: 90%'>
					<div class='col-3'>	
						Date: {{ event.date }}
					</div>
					<div class='col-4'>
						Time: {{ event.start }} to {{ event.end }}
					</div>
					<div class='col-3'>
						Title: {{event.title}}
					</div>
					<div class='col-2 text-center'>
						<a href={% url 'project-event' event.id %}>
							<i class="fa-solid fa-calendar-days fa-xl"></i>
						</a>
					</div>
				</div>
				<hr>
				{% endfor %}
			</div>
		</div>
	</div>
	<div class='col-4'>
		<div class='sections'>
			<h1 class='h1-1'>				<button
				class="btn-cust btn-cust-color" 
				onclick="window.location.href='{% url 'project-calendar' %}'">Calendar</button></h1>
			<hr>

		</div>
	</div>
</div>

<div class='row mt-4 mb-4'>
	<div class='col-4'>
		<div class='sections h-100'>
			<h1 class='h1-1'>Pending Project Request</h1>
			<hr>
			<div class='row mt-4 '>
				<div class="overflow-auto scroll-menu">
					{% for project in project_request %}
					{% if project.status == 'pending' %}
					<div class='row p-p'>
						<div class='col-10 text-center'>
							{{ project.name|title }} 
						</div>

					
						<div class='col-2'>
						<a href="{% url 'request-details' project.slug %}">
							<i class="fa-regular fa-folder-open"></i>
						</a>
						</div>
						
					</div>
					<hr>
					{% endif %}
					{% endfor %}
				</div>
			</div>
		</div>
	</div>
	<div class='col-8'>
		<div class='sections h-100'>
			<h1 class='h1-1 mb-2'>Search and Filter Project List</h1>
			<form method="GET" action="." class='form-group'>
				<div class='row'>
					<div class='col-12 mb-2'>
						<input class="form-control" list="project-list" type="search" name="project" placeholder="Project">
						<datalist id="project-list">
						{% for project in project_list %}
							<option value="{{ project.name }}"></option>
						{% endfor %}
						</datalist>
					</div>
					<div class='col-12 mb-2'>
						<input class="form-control" list="client-list" type="search" name="client" placeholder="Client">
						<datalist id="client-list">
						{% for client in client_info %}
							<option value="{{ client.client_details.client }}"></option>
						{% endfor %}
						</datalist>
					</div>
				</div>
				<div class='row'>
					<div class="col-4 mt-4">
						<select class="form-select" type="select" name="order">
							<option value="Newest">Newest</option>
							<option value="Oldest">Oldest</option>
						</select>
					</div>                
					<div class="col-6">
						<button type="submit" class="btn-cust btn-cust-color mt-4">Search</button>
					</div>
				</div>
			</form>


			<div class="overflow-auto scroll-menu">
			{% for project in project_info %}
				<div class='col-6'>
					<div class='inv-card'>
						<div class='inv-card-content'>
							<div class='row mt-1'>
								<div class='col-6'>
									<p class="p-p">
										{{ project.project_details.project }} 
										<br>
										{{ project.project_details.project_client }}
									</p>
								</div>
								<div class='col-6'>
									
									<p class="p-p">Status: <br> {{ project.project_details.project_status }}</p>
								</div>
								<div class='col-6'>
									<p class="p-p">Cost:  {{ project.project_details.project_cost }}</p>
								</div>
								<div class='col-12'>
									<button href="#" class="btn-cust btn-cust-color" onclick="window.location.href='{% url 'project-details' project.project_details.project_id %}'">Details</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			{% endfor %}
			</div>
		</div>
	</div>
</div>

<script src={% static 'js/graphs.js' %}></script>

{% endif %}

{% endblock %}